"use strict";(self.webpackChunkoj_client=self.webpackChunkoj_client||[]).push([[739],{50739:function(e,t,n){n.r(t),n.d(t,{default:function(){return Le}});var s=n(74165),i=n(15861),r=n(29439),a=n(1413),o=n(72791),l=n(11087),c=n(59434),d=n(52791),u=n(55931),h=n(95193),p=n(20068),f=n(48980),m=n(49877),x=n(76098),g=n(77209),v=n(97893),j=n(42290),y=n(82167),b=n(72821),Z=n(5289),N=n(65661),w=n(39157),C=n(27391),S=n(68096),k=n(30829),T=n(99321),L=n(84638),_=n(12114),M=n(97123),E=n(36151),O=n(66934),A=n(9955),z=n(33449),I="Note_note__1zm-A",P="Note_title__yCf6+",V="Note_desc__NzxhC",R="Note_ftr__BNTLf",W=n(80184),D=function(e){var t=e.note,n=e.setOpenViewModal,s=e.setViewNote,i=e.refreshNotesList,r=t.title,a=t.codeid,l=t.desc,c=t.username,d=t.access,u=t.editable,h=t.edited,p=t.deleted;r=r||"Title",a=a||null,l=l||"Description",u=u||!1,c=c||"guest";return(0,W.jsxs)("div",{className:I,style:(h||p)&&{cursor:"default"},onClick:function(){!a||h||p||(s(t),n(!0))},children:[h||p?(0,W.jsxs)(o.Fragment,{children:[(0,W.jsx)("div",{style:{fontSize:"2.4rem",fontWeight:700,color:"hsl(0, 60%, 50%)"},children:p?"Deleted":"Edited"}),(0,W.jsx)("div",{style:{fontSize:"0.8rem",color:"hsla(0, 40%, 50%,0.8)",margin:"unset",lineHeight:"0.9rem"},children:p?"This note has been Removed !":"An Edit has been made to this note"}),(0,W.jsxs)("div",{style:{fontSize:"0.8rem",color:"hsla(0, 40%, 50%,0.8)",margin:"unset",lineHeight:"0.9rem"},children:[(0,W.jsx)("span",{style:{zIndex:100,position:"relative",color:"blue",textDecoration:"underline",fontWeight:500,cursor:"pointer",marginRight:"3px"},onClick:i,children:"Refresh"}),"this page to see changes !"]})]}):(0,W.jsxs)(o.Fragment,{children:[(0,W.jsx)("h4",{className:P,children:r}),(0,W.jsx)("p",{className:V,children:l})]}),(0,W.jsxs)("div",{className:R,children:[(0,W.jsx)("span",{children:c}),(0,W.jsxs)("span",{children:[d," / ",u?"editable":"read-only"]})]})]})},J=n(88446),F=n(14277),H=(0,O.ZP)(A.Z)((function(e){var t=e.theme;return{padding:8,"& .MuiSwitch-track":{borderRadius:11,"&:before, &:after":{content:'""',position:"absolute",top:"50%",transform:"translateY(-50%)",width:16,height:16},"&:before":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="'.concat(encodeURIComponent(t.palette.getContrastText(t.palette.primary.main)),'" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>\')'),left:12},"&:after":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="'.concat(encodeURIComponent(t.palette.getContrastText(t.palette.primary.main)),'" d="M19,13H5V11H19V13Z" /></svg>\')'),right:12}},"& .MuiSwitch-thumb":{boxShadow:"none",width:16,height:16,margin:2}}})),B=function(e){var t=e.openModal,n=e.setOpenModal,a=e.isMobile,l=e.setReloadNeeded,u=e.SlideTransition,h=(0,c.v9)((function(e){return e.auth})),p=h.username,f=h.isAdmin,m=h.isGuest,x=(0,o.useState)(""),g=(0,r.Z)(x,2),v=g[0],j=g[1],y=(0,o.useState)(""),b=(0,r.Z)(y,2),O=b[0],A=b[1],I=(0,o.useState)("public"),P=(0,r.Z)(I,2),V=P[0],R=P[1],B=(0,o.useState)(!1),G=(0,r.Z)(B,2),U=G[0],Q=G[1],q=(0,o.useState)(""),Y=(0,r.Z)(q,2),K=Y[0],X=Y[1],$=(0,o.useState)("c"),ee=(0,r.Z)($,2),te=ee[0],ne=ee[1],se=(0,c.I0)(),ie=function(){j(""),A(""),R("public"),Q(!1),X(""),n(!1)},re=(0,o.useRef)(null);return(0,o.useEffect)((function(){if(t){var e=re.current;null!==e&&e.focus()}}),[t]),(0,o.useEffect)((function(){"private"===V&&Q(!1)}),[V]),(0,W.jsxs)(Z.Z,{open:t,onClose:function(){return n(!1)},scroll:"paper","aria-labelledby":"Add-Note",fullWidth:!0,maxWidth:!a&&"sm",fullScreen:a,TransitionComponent:u,children:[(0,W.jsx)(N.Z,{style:{textTransform:"capitalize"},children:"Add Note"}),(0,W.jsxs)(w.Z,{dividers:!0,ref:re,children:[(0,W.jsxs)("div",{style:{display:"flex",justifyContent:"center",position:"relative"},children:[(0,W.jsx)("span",{style:{position:"absolute",top:"-0.8rem",left:"0",fontWeight:600,opacity:.6},children:"Preview :"}),(0,W.jsx)(D,{note:{title:v,desc:O,access:V,editable:U,username:p}})]}),(0,W.jsxs)(d.Z,{component:"form",sx:{"& .MuiTextField-root":{mb:1.3,width:"85%"}},noValidate:!0,autoComplete:"off",children:[(0,W.jsx)(C.Z,{required:!0,id:"title-textarea",label:"Title",placeholder:"Write max 20 characters",value:v,onChange:function(e){return j(e.target.value)}}),(0,W.jsx)(C.Z,{id:"desc-textarea",label:"Description",placeholder:"Write max 200 characters",multiline:!0,value:O,onChange:function(e){return A(e.target.value)}}),(0,W.jsxs)(S.Z,{sx:{width:"85%"},children:[(0,W.jsx)(k.Z,{id:"access-input-label",children:"Access"}),(0,W.jsxs)(T.Z,{labelId:"access-input-label",id:"access-input",label:"Access",value:V,onChange:function(e){return R(e.target.value)},children:[f&&(0,W.jsx)(L.Z,{value:"global",children:"Global"}),(0,W.jsx)(L.Z,{value:"public",children:"Public"}),!m&&(0,W.jsx)(L.Z,{value:"private",children:"Private"})]})]}),"private"!==V?(0,W.jsxs)("div",{children:[(0,W.jsx)(_.Z,{label:"Editable (By Anyone)",control:(0,W.jsx)(H,{checked:U,onChange:function(e){return Q(e.target.checked)}}),labelPlacement:"start"}),(0,W.jsxs)("span",{style:{marginLeft:"0.9rem",fontWeight:600,opacity:.6},children:[U?"Yes":"No"," "]})]}):(0,W.jsx)("div",{style:{fontSize:"0.85rem",fontWeight:600,opacity:.6,margin:"0.6rem 0 0.6rem 0"},children:"Private Note can't be made Editable by everyone (as only you can view/edit)"}),(0,W.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},children:[(0,W.jsx)("div",{style:{fontWeight:600,fontSize:"1.1rem",opacity:.7},children:"Enter Code : "}),(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(k.Z,{id:"changeLang-select-label",children:"Language"}),(0,W.jsxs)(T.Z,{labelId:"changeLang-select-label",id:"changeLang-select",value:te,label:"Language",style:{width:"8em",height:"2.5em"},onChange:function(e){return ne(e.target.value)},children:[(0,W.jsx)(L.Z,{value:"c",children:"C"}),(0,W.jsx)(L.Z,{value:"cpp",children:"Cpp"}),(0,W.jsx)(L.Z,{value:"py",children:"Python"}),(0,W.jsx)(L.Z,{value:"java",children:"JAVA"}),(0,W.jsx)(L.Z,{value:"js",children:"JS"})]})]})]}),(0,W.jsx)(z.Z,{code:K,setCode:X,language:te,fontSize:13})]})]}),(0,W.jsxs)(M.Z,{children:[(0,W.jsx)(E.Z,{style:{textTransform:"capitalize"},variant:"outlined",color:"secondary",onClick:function(){v&&O?(ie(),se(F.o.set({type:"info",message:"Adding New Note..."})),fetch("".concat(J.p,"/api/notes"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({title:v,desc:O,code:K,language:te,access:V,editable:U}),credentials:"include"}).then(function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,!t.ok){e.next=5;break}return e.abrupt("return",n);case 5:return e.abrupt("return",Promise.reject(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){se(F.o.set({type:"success",message:"Added Note Successfully !",description:JSON.stringify(e)})),l(!0)})).catch((function(e){console.error(e),se(F.o.set({type:"error",message:"Adding Note Unsuccessful!",description:JSON.stringify(e)}))}))):se(F.o.set({type:"error",message:"title and description can't be empty",description:"title and description are required so please fill both !!!"}))},children:"Add"}),(0,W.jsx)(E.Z,{style:{textTransform:"capitalize"},variant:"outlined",onClick:ie,children:"Cancel"})]})]})},G=n(13400),U=n(51691),Q=n(60627),q=n(5345),Y=n(38820),K=n(5397),X=n(40318),$=n(35759),ee=n(72426),te=n.n(ee),ne=n(76998),se=n.n(ne),ie="ViewNote_body__+CDLN",re="ViewNote_response__h-VhU",ae="ViewNote_resHead__Vhkwn",oe="ViewNote_resTextHead__eYJO6",le=n(7091),ce=function(e){var t=e.open,n=e.setOpen,s=e.handleDeleteOperation,i=function(){n(!1)};return(0,W.jsxs)(Z.Z,{open:t,onClose:i,"aria-labelledby":"alert-dialog-delete-note",TransitionComponent:Q.Z,children:[(0,W.jsx)(N.Z,{children:"Delete Note"}),(0,W.jsx)(w.Z,{children:(0,W.jsxs)(U.Z,{children:["Are you sure you want to delete this note ?",(0,W.jsx)("br",{}),"(Once Note is Delete can't be recovered !)"]})}),(0,W.jsxs)(M.Z,{children:[(0,W.jsx)(E.Z,{onClick:s,children:"Delete"}),(0,W.jsx)(E.Z,{onClick:i,autoFocus:!0,children:"Cancel"})]})]})},de=function(e,t,n,r,a){(0,o.useEffect)((function(){e&&fetch("".concat(J.p,"/api/notes/").concat(e,"?noteid=").concat(t),{headers:{"Content-Type":"application/json"},method:"GET",credentials:"include"}).then(function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,!t.ok){e.next=5;break}return e.abrupt("return",n);case 5:return e.abrupt("return",Promise.reject(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){n(e.code),r(e.language)})).catch((function(e){n(JSON.stringify(e))})).finally((function(){return a(!1)}))}),[e,t,n,r,a])},ue=function(e){var t=e.openModal,n=e.setOpenModal,l=e.viewNote,u=e.setEditNote,h=e.setOpenEditModal,x=e.isMobile,g=e.markEditOrDelete,v=e.setReloadNeeded,j=e.SlideTransition,y=l.username,b=l.title,S=l.desc,k=l.access,T=l.editable,L=l.codeid,_=l._id,O=l.lastModifiedAt,A=(0,c.I0)(),I=(0,c.v9)((function(e){return e.auth})),P=I.username,V=I.isAdmin,R=I.isGuest,H=(0,o.useState)(""),B=(0,r.Z)(H,2),Q=B[0],ee=B[1],ne=(0,o.useState)("c"),ue=(0,r.Z)(ne,2),he=ue[0],pe=ue[1],fe=(0,o.useState)(!1),me=(0,r.Z)(fe,2),xe=me[0],ge=me[1],ve=(0,o.useState)(!1),je=(0,r.Z)(ve,2),ye=je[0],be=je[1];!0===ye&&setTimeout((function(){return be(!1)}),2500);var Ze=(0,o.useState)(!0),Ne=(0,r.Z)(Ze,2),we=Ne[0],Ce=Ne[1],Se=(0,o.useRef)(null);(0,o.useEffect)((function(){if(t){var e=Se.current;null!==e&&e.focus()}}),[t]),de(L,_,ee,pe,Ce);var ke=(0,o.useState)("not-initialized"),Te=(0,r.Z)(ke,2),Le=Te[0],_e=Te[1],Me=(0,o.useState)({status:"pending"}),Ee=(0,r.Z)(Me,2),Oe=Ee[0],Ae=Ee[1],ze=(0,o.useState)(""),Ie=(0,r.Z)(ze,2),Pe=Ie[0],Ve=Ie[1],Re=(0,o.useRef)(null);(0,o.useEffect)((function(){ee(""),Ve(""),Ce(!0),_e("not-initialized"),Ae({status:"pending"})}),[_]);var We=(0,o.useRef)(null),De=(0,o.useCallback)((function(){We.current&&(clearInterval(We.current),We.current=null)}),[]);(0,o.useEffect)((function(){We.current&&_e("not-initialized"),De()}),[t,De]);var Je=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"submitting"!==Le){e.next=3;break}return e.abrupt("return");case 3:return _e("submitting"),Ae({msg:"Queueing...",status:"pending"}),Re.current&&Re.current.scrollIntoView({behavior:"smooth"}),e.prev=6,e.next=9,fetch("".concat(J.p,"/api/explore/codeExecutor"),{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({code:Q,language:he,input:Pe})});case 9:return n=e.sent,e.next=12,n.json();case 12:r=e.sent,Ae(r),n.ok?We.current=setInterval((0,i.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J.p,"/api/explore/status/").concat(r.queryId),{headers:{"Content-Type":"application/json"},method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,We.current&&!t.ok?(De(),_e("submitted"),Ae(n)):We.current&&"pending"!==n.status&&(De(),_e("submitted"),Ae((0,a.Z)((0,a.Z)({},n.output),{},{status:n.status})));case 7:case"end":return e.stop()}}),e)}))),1e3):_e("submitted"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),Ae({msg:"caught errors while sending code to server for getting verdict",serverError:JSON.stringify(e.t0)}),_e("submitted");case 21:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}(),Fe=V||"private"!==k&&T||!R&&P===y,He=V||!R&&P===y;return(0,W.jsxs)(o.Fragment,{children:[(0,W.jsx)(ce,{open:xe,setOpen:ge,handleDeleteOperation:function(){ge(!1),n(!1),fetch("".concat(J.p,"/api/notes/").concat(_),{headers:{"Content-Type":"application/json"},method:"DELETE",credentials:"include"}).then(function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,!t.ok){e.next=5;break}return e.abrupt("return",n);case 5:return e.abrupt("return",Promise.reject(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){A(F.o.set({type:"success",message:"Deleted Note Successfully !",description:JSON.stringify(e)})),g(_,"deleted"),v(!0)})).catch((function(e){console.error(e),A(F.o.set({type:"error",message:"Deleting Note Unsuccessful!",description:JSON.stringify(e)}))}))}}),(0,W.jsxs)(Z.Z,{open:t,onClose:function(){return n(!1)},scroll:"paper","aria-labelledby":"View-Note",fullWidth:!0,maxWidth:!x&&"md",fullScreen:x,TransitionComponent:j,children:[(0,W.jsx)(N.Z,{style:{textTransform:"capitalize"},children:(0,W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,W.jsx)("span",{children:"View Note"}),(0,W.jsxs)("div",{style:{display:"flex"},children:[(0,W.jsx)(p.Z,{TransitionComponent:f.Z,title:"Share",placement:"bottom",children:(0,W.jsx)(d.Z,{children:(0,W.jsx)(m.Z,{onClick:function(){var e=window.location.href,t="",n="",s="";se()(e)?"private"===k?(t="warning",n="Link copied but someone else can't open it as its a Private Note",s="Make this Note public to make it share-able !"):(t="success",n="Link to the Note copied successfully !",s="Link to Note : ".concat(e)):(t="error",n="There are some errors copying the Note's Link !",s="Try using another browser !"),A(F.o.set({type:t,message:n,description:s}))},size:"small",color:"success","aria-label":"share",children:(0,W.jsx)(q.Z,{})})})}),(0,W.jsx)(p.Z,{TransitionComponent:f.Z,title:Fe?"Edit":"Can't edit this note",placement:"bottom",children:(0,W.jsx)(d.Z,{children:(0,W.jsx)(m.Z,{onClick:function(){u((0,a.Z)((0,a.Z)({},l),{},{code:Q,language:he})),h(!0),n(!1)},size:"small",color:"info","aria-label":"edit",sx:{ml:1},disabled:!Fe,children:(0,W.jsx)(Y.Z,{})})})}),(0,W.jsx)(p.Z,{TransitionComponent:f.Z,title:He?"Delete":"Can't delete this note",placement:"bottom",children:(0,W.jsx)(d.Z,{children:(0,W.jsx)(m.Z,{onClick:function(){return ge(!0)},size:"small",color:"warning","aria-label":"delete",sx:{ml:1},disabled:!He,children:(0,W.jsx)(K.Z,{})})})})]})]})}),(0,W.jsxs)(w.Z,{dividers:!0,ref:Se,children:[(0,W.jsxs)("div",{style:{display:"flex",justifyContent:"center",position:"relative"},children:[(0,W.jsx)("span",{style:{position:"absolute",top:"-0.8rem",left:"0",fontWeight:600,opacity:.6},children:"Preview :"}),(0,W.jsx)(D,{note:{title:b,desc:S,access:k,editable:T,username:y}})]}),(0,W.jsxs)(d.Z,{component:"form",sx:{"& .MuiTextField-root":{mb:1.3,width:"85%"}},noValidate:!0,autoComplete:"off",children:[(0,W.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},children:[(0,W.jsx)("div",{children:(0,W.jsx)(p.Z,{TransitionComponent:f.Z,title:ye?"Code Copied":"Copy Code",placement:"right",children:(0,W.jsx)(G.Z,{onClick:function(){var e=se()(Q),t=e?"success":"error",n=e?"Code copied successfully !":"There are some errors copying the code !";A(F.o.set({type:t,message:n})),be(!0)},"aria-label":ye?"Code Copied":"Copy Code",children:ye?(0,W.jsx)(X.Z,{}):(0,W.jsx)($.Z,{})})})}),(0,W.jsxs)("div",{style:{fontWeight:600,fontSize:"1.1rem",opacity:.7},children:["Language : ",we?"...":he]})]}),(0,W.jsx)(z.Z,{code:Q,setCode:ee,language:he,fontSize:15,isReadOnly:!0,isLoading:we})]}),(0,W.jsx)(C.Z,{id:"input-textarea",placeholder:"Put Multiline Input here",label:"Any Input ?",color:"secondary",fullWidth:!0,multiline:!0,maxRows:"3",variant:"outlined",sx:{marginTop:"2rem"},value:Pe,onChange:function(e){return Ve(e.target.value)}}),"not-initialized"!==Le&&(0,W.jsx)(d.Z,{className:ie,children:(0,W.jsxs)("div",{style:{"--col":"success"===Oe.status?127:0},className:re,children:[Oe.msg&&(0,W.jsxs)("div",{className:oe,children:[(0,W.jsx)("div",{className:ae,children:"Msg: "}),(0,W.jsx)("div",{children:Oe.msg})]}),Oe.stdout&&(0,W.jsxs)("div",{className:oe,children:[(0,W.jsx)("div",{className:ae,children:"STDOUT: "}),(0,W.jsx)("div",{children:Oe.stdout})]}),Oe.stderr&&(0,W.jsxs)("div",{className:oe,children:[(0,W.jsx)("div",{className:ae,children:"STDERR: "}),(0,W.jsx)("div",{children:Oe.stderr})]}),Oe.error&&(0,W.jsxs)("div",{className:oe,children:[(0,W.jsx)("div",{className:ae,children:"Error: "}),(0,W.jsx)("div",{children:JSON.stringify(Oe.error)})]}),Oe.serverError&&(0,W.jsxs)("div",{className:oe,children:[(0,W.jsx)("div",{className:ae,children:"ServerError: "}),(0,W.jsx)("div",{children:Oe.serverError.toString()})]}),"pending"===Oe.status&&(0,W.jsx)("div",{style:{marginTop:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,W.jsx)(le.Z,{})})]})}),(0,W.jsx)("div",{ref:Re,style:{marginTop:"18rem"}})]}),(0,W.jsxs)(M.Z,{children:[(0,W.jsx)("div",{style:{width:"100%",padding:"6px 8px",textTransform:"capitalize"},children:(0,W.jsxs)(U.Z,{children:["Last Modified: ",te()(O).fromNow()]})}),(0,W.jsx)(E.Z,{style:{textTransform:"capitalize"},variant:"outlined",color:"secondary",onClick:Je,children:"Compile"}),(0,W.jsx)(E.Z,{style:{textTransform:"capitalize"},variant:"outlined",onClick:function(){n(!1)},children:"Cancel"})]})]})]})},he=(0,O.ZP)(A.Z)((function(e){var t=e.theme;return{padding:8,"& .MuiSwitch-track":{borderRadius:11,"&:before, &:after":{content:'""',position:"absolute",top:"50%",transform:"translateY(-50%)",width:16,height:16},"&:before":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="'.concat(encodeURIComponent(t.palette.getContrastText(t.palette.primary.main)),'" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>\')'),left:12},"&:after":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="'.concat(encodeURIComponent(t.palette.getContrastText(t.palette.primary.main)),'" d="M19,13H5V11H19V13Z" /></svg>\')'),right:12}},"& .MuiSwitch-thumb":{boxShadow:"none",width:16,height:16,margin:2}}})),pe=function(e){var t=e.openModal,n=e.setOpenModal,a=e.editNote,l=e.isMobile,u=e.markEditOrDelete,h=e.setReloadNeeded,p=e.SlideTransition,f=a.username,m=a.title,x=a.desc,g=a.access,v=a.editable,j=a.code,y=a.language,b=a._id,O=(0,c.I0)(),A=(0,c.v9)((function(e){return e.auth})),I=A.username,P=A.isAdmin,V=A.isGuest,R=(0,o.useState)(""),H=(0,r.Z)(R,2),B=H[0],G=H[1],U=(0,o.useState)(""),Q=(0,r.Z)(U,2),q=Q[0],Y=Q[1],K=(0,o.useState)("public"),X=(0,r.Z)(K,2),$=X[0],ee=X[1],te=(0,o.useState)(!1),ne=(0,r.Z)(te,2),se=ne[0],ie=ne[1],re=(0,o.useState)("cpp"),ae=(0,r.Z)(re,2),oe=ae[0],le=ae[1],ce=(0,o.useState)(""),de=(0,r.Z)(ce,2),ue=de[0],pe=de[1];(0,o.useEffect)((function(){m&&G(m),x&&Y(x),g&&ee(g),v&&ie(v),y&&le(y),j&&pe(j)}),[m,x,g,v,y,j,O]);var fe=function(){n(!1)},me=(0,o.useRef)(null);return(0,o.useEffect)((function(){if(t){var e=me.current;null!==e&&e.focus()}}),[t]),(0,W.jsxs)(Z.Z,{open:t,onClose:fe,scroll:"paper","aria-labelledby":"Edit-Note",fullWidth:!0,maxWidth:!l&&"sm",fullScreen:l,TransitionComponent:p,children:[(0,W.jsx)(N.Z,{style:{textTransform:"capitalize"},children:"Edit Note"}),(0,W.jsxs)(w.Z,{dividers:!0,ref:me,children:[(0,W.jsxs)("div",{style:{display:"flex",justifyContent:"center",position:"relative"},children:[(0,W.jsx)("span",{style:{position:"absolute",top:"-0.8rem",left:"0",fontWeight:600,opacity:.6},children:"Preview :"}),(0,W.jsx)(D,{note:{title:B,desc:q,access:$,editable:se,username:f}})]}),(0,W.jsxs)(d.Z,{component:"form",sx:{"& .MuiTextField-root":{mb:1.3,width:"85%"}},noValidate:!0,autoComplete:"off",children:[(0,W.jsx)(C.Z,{required:!0,id:"title-textarea",label:"Title",placeholder:"Write max 20 characters",value:B,onChange:function(e){return G(e.target.value)}}),(0,W.jsx)(C.Z,{id:"desc-textarea",label:"Description",placeholder:"Write max 200 characters",multiline:!0,value:q,onChange:function(e){return Y(e.target.value)}}),(P||I===f)&&(0,W.jsxs)(S.Z,{sx:{width:"85%"},children:[(0,W.jsx)(k.Z,{id:"access-input-label",children:"Access"}),(0,W.jsxs)(T.Z,{labelId:"access-input-label",id:"access-input",label:"Access",value:$,onChange:function(e){return ee(e.target.value)},children:[P&&(0,W.jsx)(L.Z,{value:"global",children:"Global"}),(0,W.jsx)(L.Z,{value:"public",children:"Public"}),(P||"private"===$||I===f)&&!V&&(0,W.jsx)(L.Z,{value:"private",children:"Private"})]})]}),"private"!==$?(0,W.jsxs)("div",{children:[(0,W.jsx)(_.Z,{label:"Editable (By Anyone)",control:(0,W.jsx)(he,{checked:se,onChange:function(e){return ie(e.target.checked)}}),labelPlacement:"start"}),(0,W.jsxs)("span",{style:{marginLeft:"0.9rem",fontWeight:600,opacity:.6},children:[se?"Yes":"No"," "]})]}):(0,W.jsx)("div",{style:{fontSize:"0.85rem",fontWeight:600,opacity:.6,margin:"0.6rem 0 0.6rem 0"},children:"Private Note can't be made Editable by everyone (as only you can view/edit)"}),(0,W.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},children:[(0,W.jsx)("div",{style:{fontWeight:600,fontSize:"1.1rem",opacity:.7},children:"Enter Code : "}),(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(k.Z,{id:"changeLang-select-label",children:"Language"}),(0,W.jsxs)(T.Z,{labelId:"changeLang-select-label",id:"changeLang-select",value:oe,label:"Language",style:{width:"8em",height:"2.5em"},onChange:function(e){return le(e.target.value)},children:[(0,W.jsx)(L.Z,{value:"c",children:"C"}),(0,W.jsx)(L.Z,{value:"cpp",children:"Cpp"}),(0,W.jsx)(L.Z,{value:"py",children:"Python"}),(0,W.jsx)(L.Z,{value:"java",children:"JAVA"}),(0,W.jsx)(L.Z,{value:"js",children:"JS"})]})]})]}),(0,W.jsx)(z.Z,{code:ue,setCode:pe,language:oe,fontSize:13})]})]}),(0,W.jsxs)(M.Z,{children:[(0,W.jsx)(E.Z,{style:{textTransform:"capitalize"},variant:"outlined",color:"secondary",onClick:function(){B&&q?(fe(),O(F.o.set({type:"info",message:"Editing the Note..."})),fetch("".concat(J.p,"/api/notes/").concat(b),{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify({title:B,desc:q,code:ue,language:oe,access:$,editable:se}),credentials:"include"}).then(function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,!t.ok){e.next=5;break}return e.abrupt("return",n);case 5:return e.abrupt("return",Promise.reject(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){O(F.o.set({type:"success",message:"Edited Note Successfully !",description:JSON.stringify(e)})),h(!0),u(b,"edited")})).catch((function(e){console.error(e),O(F.o.set({type:"error",message:"Editing Note Unsuccessful!",description:JSON.stringify(e)}))}))):O(F.o.set({type:"error",message:"title and description can't be empty",description:"title and description are required so please fill both !!!"}))},children:"Save"}),(0,W.jsx)(E.Z,{style:{textTransform:"capitalize"},variant:"outlined",onClick:fe,children:"Cancel"})]})]})},fe="Notes_head__PxwPV",me="Notes_noteList__vMwKp",xe="Notes_addNoteFab__aHO+F",ge="Notes_adminModeFab__IAA1s",ve="Notes_container__5IeH0",je="Notes_ncLabel__pnmDM",ye="Notes_noNote__PQsTL",be="Notes_red__HdLv9",Ze=(0,o.forwardRef)((function(e,t){return(0,W.jsx)(u.Z,(0,a.Z)((0,a.Z)({ref:t},e),{},{direction:"up"}))})),Ne=!0,we=function(e){var t=e.searchNoteQuery,n=e.setAllNotes,s=e.originalAllNotes,i=(0,o.useTransition)(),a=(0,r.Z)(i,2),l=a[0],c=a[1];return(0,o.useEffect)((function(){c((function(){n(t?s.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())||e.desc.toLowerCase().includes(t.toLowerCase())})):s)}))}),[t,s,n]),[l]},Ce=function(e){var t=e.addNoteHandler,n=e.isAdmin,s=e.isAdminMode,i=e.setAdminMode;return(0,W.jsxs)(o.Fragment,{children:[(0,W.jsx)(p.Z,{TransitionComponent:f.Z,title:"Add Note",placement:"bottom",children:(0,W.jsx)(m.Z,{onClick:t,className:xe,"aria-label":"add-note",children:(0,W.jsx)(g.Z,{sx:{fontSize:"1.7rem"}})})}),n&&(0,W.jsx)(p.Z,{TransitionComponent:f.Z,title:"Admin Mode",placement:"bottom",children:(0,W.jsx)(m.Z,{color:"secondary",onClick:function(){return i(!!n&&function(e){return!e})},className:ge,"aria-label":"admin-mode",children:s?(0,W.jsx)(v.Z,{sx:{fontSize:"2.4rem"}}):(0,W.jsx)(j.Z,{sx:{fontSize:"2.4rem"}})})})]})},Se=function(e){var t=e.reloadNeeded,n=e.refreshNotesList;return(0,W.jsxs)(o.Fragment,{children:[(0,W.jsx)("div",{className:fe,children:"Notes"}),t&&(0,W.jsxs)("div",{style:{fontSize:"1rem",color:"hsla(0, 40%, 50%,0.8)",margin:"unset",position:"relative",marginBottom:"0.5rem"},children:[(0,W.jsx)("span",{onClick:n,style:{zIndex:100,position:"relative",color:"blue",textDecoration:"underline",fontWeight:500,cursor:"pointer"},children:"Refresh"})," this page to see changes !"]})]})},ke=function(e){var t=e.searchNoteQuery,n=e.setSearchNoteQuery,s=e.isSearching;return(0,W.jsxs)(d.Z,{sx:{position:"relative",borderRadius:"5px",backgroundColor:"rgba(0,0,0,0.16)",transition:"all 300ms ease-in-out","&:hover":{backgroundColor:"rgba(0,0,0,0.13)"},width:"75%",display:"flex",marginBottom:"1rem",marginTop:"0.5rem"},children:[(0,W.jsx)(d.Z,{sx:{padding:"0 1rem",height:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,W.jsx)(y.Z,{})}),(0,W.jsx)(x.ZP,{sx:{color:"inherit",width:"100%","& .MuiInputBase-input":{padding:"0.7rem",paddingLeft:"3.5rem",width:"100%"}},placeholder:"Search a note\u2026",inputProps:{"aria-label":"search a note"},onChange:function(e){return n(e.target.value)},value:t}),s&&(0,W.jsx)("span",{style:{display:"flex",alignItems:"center",marginRight:"5px"},className:"spin",color:"black"})]})},Te=function(e){var t=e.allNotes,n=e.refreshNotesList,s=e.setViewNote,i=e.setOpenViewModal,r=e.loggedIn,a=e.username,l=e.addNoteHandler;return(0,W.jsxs)(o.Fragment,{children:[(0,W.jsxs)("div",{className:je,children:[(0,W.jsx)("span",{children:"Global Notes by Admin"}),(0,W.jsx)(b.Z,{fontSize:"medium"})]}),(0,W.jsx)("div",{className:me,children:t.filter((function(e){return"global"===e.access})).map((function(e){return(0,W.jsx)(D,{refreshNotesList:n,note:e,setViewNote:s,setOpenViewModal:i},e._id)}))}),(0,W.jsx)("div",{className:je,children:(0,W.jsx)("span",{children:"Public Notes by Users/Guest"})}),(0,W.jsx)("div",{className:me,children:t.filter((function(e){return"public"===e.access})).map((function(e){return(0,W.jsx)(D,{refreshNotesList:n,note:e,setViewNote:s,setOpenViewModal:i},e._id)}))}),(0,W.jsx)("div",{className:je,children:r?(0,W.jsxs)("span",{children:["Private Notes by ",a]}):(0,W.jsx)("span",{className:be,children:"To see Private Notes you must be Logged In !"})}),r?(0,W.jsx)("div",{className:me,children:0===t.filter((function(e){return"private"===e.access})).length?(0,W.jsxs)("span",{className:be+" "+ye,children:["You have not created any Private Note, ",(0,W.jsx)("button",{onClick:l,children:"Make One"})]}):t.filter((function(e){return"private"===e.access})).map((function(e){return(0,W.jsx)(D,{refreshNotesList:n,note:e,setViewNote:s,setOpenViewModal:i},e._id)}))}):""]})},Le=function(){var e=(0,o.useState)([]),t=(0,r.Z)(e,2),n=t[0],d=t[1],u=(0,o.useState)([]),p=(0,r.Z)(u,2),f=p[0],m=p[1],x=(0,o.useState)(!1),g=(0,r.Z)(x,2),v=g[0],j=g[1],y=(0,o.useState)(!1),b=(0,r.Z)(y,2),Z=b[0],N=b[1],w=(0,o.useState)({}),C=(0,r.Z)(w,2),S=C[0],k=C[1],T=(0,o.useState)(!1),L=(0,r.Z)(T,2),_=L[0],M=L[1],E=(0,o.useState)({}),O=(0,r.Z)(E,2),A=O[0],z=O[1],I=(0,o.useState)(!0),P=(0,r.Z)(I,2),V=P[0],R=P[1],D=(0,o.useState)(void 0),H=(0,r.Z)(D,2),G=H[0],U=H[1],Q=(0,o.useState)(!1),q=(0,r.Z)(Q,2),Y=q[0],K=q[1],X=(0,o.useState)(""),$=(0,r.Z)(X,2),ee=$[0],te=$[1],ne=(0,l.lr)(),se=(0,r.Z)(ne,2),ie=se[0],re=se[1],ae=(0,o.useState)(!1),oe=(0,r.Z)(ae,2),ce=oe[0],de=oe[1],he=(0,c.I0)(),fe=(0,c.v9)((function(e){return e.auth})),me=fe.loggedIn,xe=fe.username,ge=fe.isAdmin,je=(0,h.Z)("(max-width:620px)");(0,o.useEffect)((function(){if(Ne&&!V){Ne=!1;var e=ie.get("view");if(e){var t=f.find((function(t){return t._id===e}));t?(N(!0),k(t)):he(F.o.set({type:"error",message:"The Note's Link you are accessing does not exists",description:"There is a query string in url, which does not belong to any note, this may be due to : the note you are tying to access has been deleted or may be link in incomplete !"}))}}}),[V,ie,f,he]),(0,o.useEffect)((function(){Ne||re(Z?{view:S._id}:{})}),[Z,re,S]);var ye=function(e,t){d((function(n){return n.map((function(n){if(n._id===e){var s=(0,a.Z)({},n);return s[t]=!0,s}return n}))}))},be=(0,o.useCallback)((function(){R(!0),fetch("".concat(J.p,"/api/notes/allNotes").concat(ce?"?admin=true":""),{headers:{"Content-Type":"application/json"},method:"GET",credentials:"include"}).then(function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,!t.ok){e.next=5;break}return e.abrupt("return",n);case 5:return e.abrupt("return",Promise.reject(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){d(e),m(e)})).catch(U).finally((function(){return R(!1)}))}),[ce]);(0,o.useEffect)((function(){be()}),[he,be]),(0,o.useEffect)((function(){he(F.o.set({type:"info",message:"Click on Notes to view their Code !",description:"If you click on a Note, you will be able to share, edit, or delete it. Alternatively, you can add a new note by clicking on the Add button !"}))}),[he]);var Le=function(){return j(!0)},_e=we({searchNoteQuery:ee,setAllNotes:d,originalAllNotes:f}),Me=(0,r.Z)(_e,1)[0],Ee=function(){z({}),k({}),K(!1),be()};return(0,W.jsxs)(o.Fragment,{children:[V&&(0,W.jsx)(le.Z,{}),!V&&G&&(0,W.jsx)("div",{children:(0,W.jsxs)("div",{className:"errorTemplate",children:[(0,W.jsxs)("div",{children:[(0,W.jsx)("span",{children:"Msg : "}),"Wasn't able to connect to server check if your are not offline or server might not be working !"]}),G&&(0,W.jsxs)("div",{children:[(0,W.jsx)("span",{children:"Error : "}),JSON.stringify(G)]})]})}),!G&&(0,W.jsxs)("div",{className:ve,children:[(0,W.jsx)(B,{setSearchParams:re,SlideTransition:Ze,setReloadNeeded:K,isMobile:je,openModal:v,setOpenModal:j}),(0,W.jsx)(ue,{setSearchParams:re,SlideTransition:Ze,setReloadNeeded:K,markEditOrDelete:ye,isMobile:je,openModal:Z,setOpenModal:N,setEditNote:z,setOpenEditModal:M,viewNote:S}),(0,W.jsx)(pe,{setSearchParams:re,SlideTransition:Ze,setReloadNeeded:K,markEditOrDelete:ye,isMobile:je,openModal:_,setOpenModal:M,editNote:A}),(0,W.jsx)(Ce,{addNoteHandler:Le,isAdmin:ge,isAdminMode:ce,setAdminMode:de}),(0,W.jsx)(Se,{refreshNotesList:Ee,reloadNeeded:Y}),(0,W.jsx)(ke,{searchNoteQuery:ee,setSearchNoteQuery:te,isSearching:Me}),!V&&(0,W.jsx)(Te,{allNotes:n,refreshNotesList:Ee,setViewNote:k,setOpenViewModal:N,loggedIn:me,username:xe,addNoteHandler:Le})]})]})}},33449:function(e,t,n){var s=n(72791),i=n(38399),r=(n(25351),n(56339),n(25502),n(90262),n(73905),n(41941),n(30027),n(80184));t.Z=function(e){var t=e.code,n=e.setCode,a=e.language,o=e.fontSize,l=e.isReadOnly,c=void 0!==l&&l,d=e.isLoading,u=void 0!==d&&d,h="c_cpp";switch(a){case"c":case"cpp":default:h="c_cpp";break;case"java":h="java";break;case"py":h="python";break;case"js":h="javascript"}return(0,r.jsxs)(s.Fragment,{children:[u&&(0,r.jsxs)("div",{style:{position:"absolute",zIndex:10,display:"flex",alignItems:"center",pointerEvents:"none",translate:"0 1rem"},children:[(0,r.jsx)("div",{className:"spin"}),(0,r.jsx)("span",{style:{fontSize:"1.8rem",color:"rgba(128, 128, 128, 0.8)",fontWeight:500,marginLeft:"1rem"},children:"Loading Code..."})]}),(0,r.jsx)(i.ZP,{placeholder:"Enter your code here",mode:h,theme:"monokai",name:"editorv3",onLoad:function(){},onChange:function(e){return n(e)},fontSize:parseInt(o),showPrintMargin:!1,showGutter:!0,readOnly:c,highlightActiveLine:!0,value:t,width:"100%",setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:4}})]})}}}]);
//# sourceMappingURL=739.bc8bc002.chunk.js.map